
(function($,window,document,undefined){'use strict';var namespace='cbp',eventNamespace='.'+namespace;if(typeof Object.create!=='function'){Object.create=function(obj){function F(){}F.prototype=obj;return new F();};}$.expr[':'].uncached=function(obj){if(!$(obj).is('img[src!=""]')){return false;}var img=new Image();img.src=obj.src;return!img.complete;};var popup={init:function(cubeportfolio,type){var t=this,currentBlock;t.cubeportfolio=cubeportfolio;t.type=type;t.isOpen=false;t.options=t.cubeportfolio.options;if(type==='singlePageInline'){t.matrice=[-1,-1];t.height=0;t._createMarkupSinglePageInline();return;}t._createMarkup();if(t.options.singlePageDeeplinking&&type==='singlePage'){t.url=location.href;if(t.url.slice(-1)=='#'){t.url=t.url.slice(0,-1);}currentBlock=t.cubeportfolio.blocksAvailable.find(t.options.singlePageDelegate).filter(function(index){return(t.url.split('#cbp=')[1]===this.getAttribute('href'));})[0];if(currentBlock){t.url=t.url.replace(/#cbp=(.+)/ig,'');t.openSinglePage(t.cubeportfolio.blocksAvailable,currentBlock);}}},_createMarkup:function(){var t=this;t.wrap=$('<div/>',{'class':'cbp-popup-wrap cbp-popup-'+t.type,'data-action':(t.type==='lightbox')?'close':''}).on('click'+eventNamespace,function(e){if(t.stopEvents){return;}var action=$(e.target).attr('data-action');if(t[action]){t[action]();e.preventDefault();}});t.content=$('<div/>',{'class':'cbp-popup-content',}).appendTo(t.wrap);$('<div/>',{'class':'cbp-popup-loadingBox',}).appendTo(t.wrap);if(t.cubeportfolio.browser==='ie8'){t.bg=$('<div/>',{'class':'cbp-popup-ie8bg','data-action':(t.type==='lightbox')?'close':''}).appendTo(t.wrap);}t.navigationWrap=$('<div/>',{'class':'cbp-popup-navigation-wrap'}).appendTo(t.wrap);t.navigation=$('<div/>',{'class':'cbp-popup-navigation'}).appendTo(t.navigationWrap);t.closeButton=$('<button/>',{'class':'cbp-popup-close','title':'Close (Esc arrow key)','type':'button','data-action':'close',}).appendTo(t.navigation);t.nextButton=$('<button/>',{'class':'cbp-popup-next','title':'Next (Right arrow key)','type':'button','data-action':'next'}).appendTo(t.navigation);t.prevButton=$('<button/>',{'class':'cbp-popup-prev','title':'Previous (Left arrow key)','type':'button','data-action':'prev',}).appendTo(t.navigation);if(t.type==='singlePage'){if(t.options.singlePageShowCounter){t.counter=$('<div/>',{'class':'cbp-popup-singlePage-counter'}).appendTo(t.navigation);}t.content.on('click'+eventNamespace,t.options.singlePageDelegate,function(e){e.preventDefault();var i,len=t.dataArray.length,href=this.getAttribute('href');for(i=0;i<len;i++){if(t.dataArray[i].url==href){break;}}t.singlePageJumpTo(i-t.current);});}$(document).on('keydown'+eventNamespace,function(e){if(!t.isOpen)return;if(t.stopEvents)return;if(e.keyCode===37){t.prev();}else if(e.keyCode===39){t.next();}else if(e.keyCode===27){t.close();}});},_createMarkupSinglePageInline:function(){var t=this;t.wrap=$('<div/>',{'class':'cbp-popup-singlePageInline'}).on('click'+eventNamespace,function(e){if(t.stopEvents){return;}var action=$(e.target).attr('data-action');if(action){t[action]();e.preventDefault();}});t.content=$('<div/>',{'class':'cbp-popup-content',}).appendTo(t.wrap);$('<div/>',{'class':'cbp-popup-loadingBox',}).appendTo(t.wrap);t.navigation=$('<div/>',{'class':'cbp-popup-navigation'}).appendTo(t.wrap);t.closeButton=$('<button/>',{'class':'cbp-popup-close','title':'Close (Esc arrow key)','type':'button','data-action':'close',}).appendTo(t.navigation);},destroy:function(){var t=this;$(document).off('keydown'+eventNamespace);t.cubeportfolio.$obj.off('click'+eventNamespace,t.options.lightboxDelegate);t.cubeportfolio.$obj.off('click'+eventNamespace,t.options.singlePageDelegate);t.content.off('click'+eventNamespace,t.options.singlePageDelegate);t.cubeportfolio.$obj.off('click'+eventNamespace,t.options.singlePageInlineDelegate);t.cubeportfolio.$obj.removeClass('cbp-popup-isOpening');t.cubeportfolio.blocks.removeClass('cbp-singlePageInline-active');t.wrap.remove();},openLightbox:function(blocks,currentBlock){var t=this,i=0,currentBlockHref,tempHref=[],element;if(t.isOpen)return;if(t.cubeportfolio.singlePageInline&&t.cubeportfolio.singlePageInline.isOpen){t.cubeportfolio.singlePageInline.close();}t.isOpen=true;t.stopEvents=false;t.dataArray=[];t.current=null;currentBlockHref=currentBlock.getAttribute('href');if(currentBlockHref===null){throw new Error('HEI! Your clicked element doesn\'t have a href attribute.');}$.each(blocks.find(t.options.lightboxDelegate),function(index,item){var href=item.getAttribute('href'),src=href,type='isImage';if($.inArray(href,tempHref)===-1){if(currentBlockHref==href){t.current=i;}else if(!t.options.lightboxGallery){return;}if(/youtube/i.test(href)){src='//www.youtube.com/embed/'+href.substring(href.lastIndexOf('v=')+2)+'?autoplay=1';type='isYoutube';}else if(/vimeo/i.test(href)){src='//player.vimeo.com/video/'+href.substring(href.lastIndexOf('/')+1)+'?autoplay=1';type='isVimeo';}else if(/ted\.com/i.test(href)){src='http://embed.ted.com/talks/'+href.substring(href.lastIndexOf('/')+1)+'.html';type='isTed';}else if(/(\.mp4)|(\.ogg)|(\.ogv)|(\.webm)/i.test(href)){if(href.indexOf('|')!==-1){src=href.split('|');}else{src=href.split('%7C');}type='isSelfHosted';}t.dataArray.push({src:src,title:item.getAttribute(t.options.lightboxTitleSrc),type:type});i++;}tempHref.push(href);});t.counterTotal=t.dataArray.length;if(t.counterTotal===1){t.nextButton.hide();t.prevButton.hide();t.dataActionImg='';}else{t.nextButton.show();t.prevButton.show();t.dataActionImg='data-action="next"';}t.wrap.appendTo(document.body);t.scrollTop=$(window).scrollTop();$('html').css({overflow:'hidden',paddingRight:window.innerWidth-$(document).width()});t.wrap.show();element=t.dataArray[t.current];t[element.type](element);},openSinglePage:function(blocks,currentBlock){var t=this,i=0,currentBlockHref,tempHref=[];if(t.isOpen)return;if(t.cubeportfolio.singlePageInline&&t.cubeportfolio.singlePageInline.isOpen){t.cubeportfolio.singlePageInline.close();}t.isOpen=true;t.stopEvents=false;t.dataArray=[];t.current=null;currentBlockHref=currentBlock.getAttribute('href');if(currentBlockHref===null){throw new Error('HEI! Your clicked element doesn\'t have a href attribute.');}$.each(blocks.find(t.options.singlePageDelegate),function(index,item){var href=item.getAttribute('href');if($.inArray(href,tempHref)===-1){if(currentBlockHref==href){t.current=i;}t.dataArray.push({url:href,element:item});i++;}tempHref.push(href);});t.counterTotal=t.dataArray.length;t.wrap.appendTo(document.body);t.scrollTop=$(window).scrollTop();$('html').css({overflow:'hidden',paddingRight:window.innerWidth-$(document).width()});t.wrap.scrollTop(0);if($.isFunction(t.options.singlePageCallback)){t.options.singlePageCallback.call(t,t.dataArray[t.current].url,t.dataArray[t.current].element);}t.wrap.show();t.wrap.one(t.cubeportfolio.transitionEnd,function(){var width;if(t.options.singlePageStickyNavigation){t.wrap.addClass('cbp-popup-singlePage-sticky');width=t.wrap[0].clientWidth;t.navigationWrap.width(width);t.navigation.width(width);}});if(t.cubeportfolio.browser==='ie8'||t.cubeportfolio.browser==='ie9'){setTimeout(function(){t.wrap.addClass('cbp-popup-singlePage-sticky');},1000);if(t.options.singlePageStickyNavigation){var width=t.wrap[0].clientWidth;t.navigationWrap.width(width);t.navigation.width(width);}}setTimeout(function(){t.wrap.addClass('cbp-popup-singlePage-open');},20);if(t.options.singlePageDeeplinking){location.href=t.url+'#cbp='+t.dataArray[t.current].url;}},openSinglePageInline:function(blocks,currentBlock,fromOpen){var t=this,i=0,start=0,end=0,currentBlockHref,tempHref=[],currentRow,rows;fromOpen=fromOpen||false;t.storeBlocks=blocks;t.storeCurrentBlock=currentBlock;if(t.isOpen){if(t.dataArray[t.current].url!=currentBlock.getAttribute('href')){t.cubeportfolio.singlePageInline.close('open',{blocks:blocks,currentBlock:currentBlock,fromOpen:true});}else{t.close();}return;}t.wrap.addClass('cbp-popup-loading');t.isOpen=true;t.stopEvents=false;t.dataArray=[];t.current=null;currentBlockHref=currentBlock.getAttribute('href');if(currentBlockHref===null){throw new Error('HEI! Your clicked element doesn\'t have a href attribute.');}$.each(blocks.find(t.options.singlePageInlineDelegate),function(index,item){var href=item.getAttribute('href');if($.inArray(href,tempHref)===-1){if(currentBlockHref==href){t.current=i;}t.dataArray.push({url:href,element:item});i++;}tempHref.push(href);});$(t.dataArray[t.current].element).parents('.cbp-item').addClass('cbp-singlePageInline-active');t.counterTotal=t.dataArray.length;if(t.cubeportfolio.blocksClone){if(t.cubeportfolio.ulHidden==='clone'){t.wrap.prependTo(t.cubeportfolio.$ul);}else{t.wrap.prependTo(t.cubeportfolio.$ulClone);}}else{t.wrap.prependTo(t.cubeportfolio.$ul);}if(t.options.singlePageInlinePosition==='top'){start=0;end=t.cubeportfolio.cols-1;}else if(t.options.singlePageInlinePosition==='above'){i=Math.floor(t.current/t.cubeportfolio.cols);start=t.cubeportfolio.cols*i;end=t.cubeportfolio.cols*(i+1)-1;}else{i=Math.floor(t.current/t.cubeportfolio.cols);start=Math.min(t.cubeportfolio.cols*(i+1),t.counterTotal);end=Math.min(t.cubeportfolio.cols*(i+2)-1,t.counterTotal);currentRow=Math.ceil((t.current+1)/t.cubeportfolio.cols);rows=Math.ceil(t.counterTotal/t.cubeportfolio.cols);if(currentRow==rows){t.lastColumn=true;}else{t.lastColumn=false;}if(fromOpen){if(t.lastColumn){t.top=t.lastColumnHeight;}}else{t.lastColumnHeight=t.cubeportfolio.height;t.top=t.lastColumnHeight;}}t.matrice=[start,end];t._resizeSinglePageInline();if($.isFunction(t.options.singlePageInlineCallback)){t.options.singlePageInlineCallback.call(t,t.dataArray[t.current].url,t.dataArray[t.current].element);}if(t.options.singlePageInlineInFocus){t.scrollTop=$(window).scrollTop();$('body, html').animate({scrollTop:t.wrap.offset().top-150});}},_resizeSinglePageInline:function(removeLoadingMask){var t=this,customHeight;removeLoadingMask=removeLoadingMask||false;t.height=t.content.outerHeight(true);t.cubeportfolio._layout();t.cubeportfolio._processStyle(t.cubeportfolio.transition);if(removeLoadingMask){t.wrap.removeClass('cbp-popup-loading');}t.cubeportfolio.$obj.addClass('cbp-popup-isOpening');t.wrap.css({height:t.height});t.wrap.css({top:t.top});customHeight=(t.lastColumn)?t.height:0;t.cubeportfolio._resizeMainContainer(t.cubeportfolio.transition,customHeight);if(t.options.singlePageInlineInFocus){$('body, html').animate({scrollTop:t.wrap.offset().top-150});}},updateSinglePage:function(html){var t=this,selectorSlider;t.content.html(html);t.wrap.addClass('cbp-popup-ready');t.wrap.removeClass('cbp-popup-loading');if(t.options.singlePageShowCounter){t.counter.text((t.current+1)+' of '+t.counterTotal);}selectorSlider=t.content.find('.cbp-slider');if(selectorSlider){t.slider=Object.create(slider);t.slider._init(t,selectorSlider);}else{t.slider=null;}},updateSinglePageInline:function(html){var t=this,selectorSlider;t.content.html(html);t._loadSinglePageInline();selectorSlider=t.content.find('.cbp-slider');if(selectorSlider){t.slider=Object.create(slider);t.slider._init(t,selectorSlider);}else{t.slider=null;}},_loadSinglePageInline:function(){var t=this,imgs=[],i,img,propertyValue,src,matchUrl=/url\((['"]?)(.*?)\1\)/g;propertyValue=t.wrap.children().css('backgroundImage');if(propertyValue){var match;while((match=matchUrl.exec(propertyValue))){imgs.push({src:match[2]});}}t.wrap.find('*').each(function(){var elem=$(this);if(elem.is('img:uncached')){imgs.push({src:elem.attr('src'),element:elem[0]});}propertyValue=elem.css('backgroundImage');if(propertyValue){var match;while((match=matchUrl.exec(propertyValue))){imgs.push({src:match[2],element:elem[0]});}}});var imgsLength=imgs.length,imgsLoaded=0;if(imgsLength===0){t._resizeSinglePageInline(true);}var loadImage=function(){imgsLoaded++;if(imgsLoaded==imgsLength){t._resizeSinglePageInline(true);}};for(i=0;i<imgsLength;i++){img=new Image();$(img).on('load'+eventNamespace+' error'+eventNamespace,loadImage);img.src=imgs[i].src;}},isImage:function(el){var t=this,img=new Image();t.tooggleLoading(true);if($('<img src="'+el.src+'">').is('img:uncached')){$(img).on('load'+eventNamespace+' error'+eventNamespace,function(){t.updateImagesMarkup(el.src,el.title,(t.current+1)+' of '+t.counterTotal);t.tooggleLoading(false);});img.src=el.src;}else{t.updateImagesMarkup(el.src,el.title,(t.current+1)+' of '+t.counterTotal);t.tooggleLoading(false);}},isVimeo:function(el){var t=this;t.updateVideoMarkup(el.src,el.title,(t.current+1)+' of '+t.counterTotal);},isYoutube:function(el){var t=this;t.updateVideoMarkup(el.src,el.title,(t.current+1)+' of '+t.counterTotal);},isTed:function(el){var t=this;t.updateVideoMarkup(el.src,el.title,(t.current+1)+' of '+t.counterTotal);},isSelfHosted:function(el){var t=this;t.updateSelfHostedVideo(el.src,el.title,(t.current+1)+' of '+t.counterTotal);},updateSelfHostedVideo:function(src,title,counter){var t=this,i;t.wrap.addClass('cbp-popup-lightbox-isIframe');var markup='<div class="cbp-popup-lightbox-iframe">'+'<video controls="controls" width="100%" height="auto">';for(i=0;i<src.length;i++){if(/(\.mp4)/i.test(src[i])){markup+='<source src="'+src[i]+'" type="video/mp4">';}else if(/(\.ogg)|(\.ogv)/i.test(src[i])){markup+='<source src="'+src[i]+'" type="video/ogg">';}else if(/(\.webm)/i.test(src[i])){markup+='<source src="'+src[i]+'" type="video/webm">';}}markup+='Your browser does not support the video tag.'+'</video>'+'<div class="cbp-popup-lightbox-bottom">'+((title)?'<div class="cbp-popup-lightbox-title">'+title+'</div>':'')+((t.options.lightboxShowCounter)?'<div class="cbp-popup-lightbox-counter">'+counter+'</div>':'')+'</div>'+'</div>';t.content.html(markup);t.wrap.addClass('cbp-popup-ready');t.preloadNearbyImages();},updateVideoMarkup:function(src,title,counter){var t=this;t.wrap.addClass('cbp-popup-lightbox-isIframe');var markup='<div class="cbp-popup-lightbox-iframe">'+'<iframe src="'+src+'" frameborder="0" allowfullscreen scrolling="no"></iframe>'+'<div class="cbp-popup-lightbox-bottom">'+((title)?'<div class="cbp-popup-lightbox-title">'+title+'</div>':'')+((t.options.lightboxShowCounter)?'<div class="cbp-popup-lightbox-counter">'+counter+'</div>':'')+'</div>'+'</div>';t.content.html(markup);t.wrap.addClass('cbp-popup-ready');t.preloadNearbyImages();},updateImagesMarkup:function(src,title,counter){var t=this;t.wrap.removeClass('cbp-popup-lightbox-isIframe');var markup='<div class="cbp-popup-lightbox-figure">'+'<img src="'+src+'" class="cbp-popup-lightbox-img" '+t.dataActionImg+' />'+'<div class="cbp-popup-lightbox-bottom">'+((title)?'<div class="cbp-popup-lightbox-title">'+title+'</div>':'')+((t.options.lightboxShowCounter)?'<div class="cbp-popup-lightbox-counter">'+counter+'</div>':'')+'</div>'+'</div>';t.content.html(markup);t.wrap.addClass('cbp-popup-ready');t.resizeImage();t.preloadNearbyImages();},next:function(){var t=this;t[t.type+'JumpTo'](1);},prev:function(){var t=this;t[t.type+'JumpTo'](-1);},lightboxJumpTo:function(index){var t=this,el;t.current=t.getIndex(t.current+index);el=t.dataArray[t.current];t[el.type](el);},singlePageJumpTo:function(index){var t=this;t.current=t.getIndex(t.current+index);if($.isFunction(t.options.singlePageCallback)){t.resetWrap();t.wrap.scrollTop(0);t.wrap.addClass('cbp-popup-loading');t.options.singlePageCallback.call(t,t.dataArray[t.current].url,t.dataArray[t.current].element);if(t.options.singlePageDeeplinking){location.href=t.url+'#cbp='+t.dataArray[t.current].url;}}},resetWrap:function(){var t=this;if(t.type==='singlePage'&&t.options.singlePageDeeplinking){location.href=t.url+'#';}},getIndex:function(index){var t=this;index=index%t.counterTotal;if(index<0){index=t.counterTotal+index;}return index;},close:function(method,data){var t=this;t.isOpen=false;if(t.type==='singlePageInline'){if(method==='open'){t.wrap.addClass('cbp-popup-loading');$(t.dataArray[t.current].element).parents('.cbp-item').removeClass('cbp-singlePageInline-active');t.openSinglePageInline(data.blocks,data.currentBlock,data.fromOpen);}else{t.matrice=[-1,-1];t.cubeportfolio._layout();t.cubeportfolio._processStyle(t.cubeportfolio.transition);t.cubeportfolio._resizeMainContainer(t.cubeportfolio.transition);t.wrap.css({height:0});$(t.dataArray[t.current].element).parents('.cbp-item').removeClass('cbp-singlePageInline-active');if(t.cubeportfolio.browser==='ie8'||t.cubeportfolio.browser==='ie9'){t.content.html('');t.wrap.detach();t.cubeportfolio.$obj.removeClass('cbp-popup-isOpening');if(method==='promise'){if($.isFunction(data.callback)){data.callback.call(t.cubeportfolio);}}}else{t.wrap.one(t.cubeportfolio.transitionEnd,function(){t.content.html('');t.wrap.detach();t.cubeportfolio.$obj.removeClass('cbp-popup-isOpening');if(method==='promise'){if($.isFunction(data.callback)){data.callback.call(t.cubeportfolio);}}});}if(t.options.singlePageInlineInFocus){$('body, html').animate({scrollTop:t.scrollTop});}}}else if(t.type==='singlePage'){t.resetWrap();$(window).scrollTop(t.scrollTop);setTimeout(function(){t.stopScroll=true;t.navigationWrap.css({top:t.wrap.scrollTop()});t.wrap.removeClass('cbp-popup-singlePage-open cbp-popup-singlePage-sticky');if(t.cubeportfolio.browser==='ie8'||t.cubeportfolio.browser==='ie9'){t.content.html('');t.wrap.detach();$('html').css({overflow:'',paddingRight:''});t.navigationWrap.removeAttr('style');}},0);t.wrap.one(t.cubeportfolio.transitionEnd,function(){t.content.html('');t.wrap.detach();$('html').css({overflow:'',paddingRight:''});t.navigationWrap.removeAttr('style');});}else{$('html').css({overflow:'',paddingRight:''});$(window).scrollTop(t.scrollTop);t.content.html('');t.wrap.detach();}},tooggleLoading:function(state){var t=this;t.stopEvents=state;t.wrap[(state)?'addClass':'removeClass']('cbp-popup-loading');},resizeImage:function(){if(!this.isOpen)return;var height=$(window).height(),img=$('.cbp-popup-content').find('img'),padding=parseInt(img.css('margin-top'),10)+parseInt(img.css('margin-bottom'),10);img.css('max-height',(height-padding)+'px');},preloadNearbyImages:function(){var arr=[],img,t=this,src;arr.push(t.getIndex(t.current+1));arr.push(t.getIndex(t.current+2));arr.push(t.getIndex(t.current+3));arr.push(t.getIndex(t.current-1));arr.push(t.getIndex(t.current-2));arr.push(t.getIndex(t.current-3));for(var i=arr.length-1;i>=0;i--){if(t.dataArray[arr[i]].type==='isImage'){src=t.dataArray[arr[i]].src;img=new Image();if($('<img src="'+src+'">').is('img:uncached')){img.src=src;}}}}};var slider={_init:function(tt,obj){var t=this;t.current=0;t.obj=obj;t.$obj=$(obj);t._createMarkup();t._events();},_createMarkup:function(){var t=this,arrowWrap,bulletWrap;t.$ul=t.$obj.children('.cbp-slider-wrap');t.$li=t.$ul.children('.cbp-slider-item');t.$li.eq(0).addClass('cbp-slider-item-current');t.$liLength=t.$li.length;arrowWrap=$('<div/>',{'class':'cbp-slider-arrowWrap',}).appendTo(t.$obj);$('<div/>',{'class':'cbp-slider-arrowNext','data-action':'nextItem'}).appendTo(arrowWrap);$('<div/>',{'class':'cbp-slider-arrowPrev','data-action':'prevItem'}).appendTo(arrowWrap);bulletWrap=$('<div/>',{'class':'cbp-slider-bulletWrap',}).appendTo(t.$obj);for(var i=0;i<t.$liLength;i++){var firstItem=(i===0)?' cbp-slider-bullet-current':'';$('<div/>',{'class':'cbp-slider-bullet'+firstItem,'data-action':'jumpToItem'}).appendTo(bulletWrap);}},_events:function(){var t=this;t.$obj.on('click'+eventNamespace,function(e){var action=$(e.target).attr('data-action');if(t[action]){t[action](e);e.preventDefault();}});},nextItem:function(){this.jumpTo(1);},prevItem:function(){this.jumpTo(-1);},jumpToItem:function(e){var target=$(e.target);var index=target.index();this.jumpTo(index-this.current);},jumpTo:function(index){var t=this,item2,item1=this.$li.eq(this.current);this.current=this.getIndex(this.current+index);item2=this.$li.eq(this.current);item2.addClass('cbp-slider-item-next');item2.animate({opacity:1},function(){item1.removeClass('cbp-slider-item-current');item2.removeClass('cbp-slider-item-next').addClass('cbp-slider-item-current').removeAttr('style');var bullets=$('.cbp-slider-bullet');bullets.removeClass('cbp-slider-bullet-current');bullets.eq(t.current).addClass('cbp-slider-bullet-current');});},getIndex:function(index){index=index%this.$liLength;if(index<0){index=this.$liLength+index;}return index;},};var pluginObject={_main:function(obj,options,callbackFunction){var t=this;t.styleQueue=[];t.isAnimating=false;t.defaultFilter='*';t.registeredEvents=[];if($.isFunction(callbackFunction)){t._registerEvent('initFinish',callbackFunction,true);}t.options=$.extend({},$.fn.cubeportfolio.options,options);t.obj=obj;t.$obj=$(obj);t.width=t.$obj.width();t.$obj.addClass('cbp cbp-loading');t.$ul=t.$obj.children();t.$ul.addClass('cbp-wrapper');if(t.options.displayType==='lazyLoading'||t.options.displayType==='fadeIn'){t.$ul.css({opacity:0});}if(t.options.displayType==='fadeInToTop'){t.$ul.css({opacity:0,marginTop:30});}t._browserInfo();t._initCSSandEvents();t._prepareBlocks();if(t.options.displayType==='lazyLoading'||t.options.displayType==='sequentially'||t.options.displayType==='bottomToTop'||t.options.displayType==='fadeInToTop'){t._load();}else{t._beforeDisplay();}},_browserInfo:function(){var t=this,appVersion=navigator.appVersion,transition,animation;if(appVersion.indexOf('MSIE 8.')!==-1){t.browser='ie8';}else if(appVersion.indexOf('MSIE 9.')!==-1){t.browser='ie9';}else if(appVersion.indexOf('MSIE 10.')!==-1){t.browser='ie10';}else if(window.ActiveXObject||'ActiveXObject'in window){t.browser='ie11';}else if((/android/gi).test(appVersion)){t.browser='android';}else if((/iphone|ipad|ipod/gi).test(appVersion)){t.browser='ios';}else if((/chrome/gi).test(appVersion)){t.browser='chrome';}else{t.browser='';}if(t.browser){t.$obj.addClass('cbp-'+t.browser);}transition=t._styleSupport('transition');animation=t._styleSupport('animation');t.transition=t.transitionByFilter=(transition)?'css':'animate';if(t.transition=='animate')return;t.transitionEnd={WebkitTransition:'webkitTransitionEnd',MozTransition:'transitionend',OTransition:'oTransitionEnd otransitionend',transition:'transitionend'}[transition];t.animationEnd={WebkitAnimation:'webkitAnimationEnd',MozAnimation:'Animationend',OAnimation:'oAnimationEnd oanimationend',animation:'animationend'}[animation];t.supportCSSTransform=t._styleSupport('transform');if(t.supportCSSTransform){t._cssHooks();}},_styleSupport:function(prop){var vendorProp,supportedProp,i,capProp=prop.charAt(0).toUpperCase()+prop.slice(1),prefixes=['Moz','Webkit','O','ms'],div=document.createElement('div');if(prop in div.style){supportedProp=prop;}else{for(i=prefixes.length-1;i>=0;i--){vendorProp=prefixes[i]+capProp;if(vendorProp in div.style){supportedProp=vendorProp;break;}}}div=null;return supportedProp;},_cssHooks:function(){var t=this,transformCSS3;if(t._has3d()){transformCSS3={translate:function(x){return'translate3d('+x[0]+'px, '+x[1]+'px, 0) ';},scale:function(x){return'scale3d('+x+', '+x+', 1) ';},skew:function(x){return'skew('+x[0]+'deg, '+x[1]+'deg) ';}};}else{transformCSS3={translate:function(x){return'translate('+x[0]+'px, '+x[1]+'px) ';},scale:function(x){return'scale('+x+') ';},skew:function(x){return'skew('+x[0]+'deg, '+x[1]+'deg) ';}};}function setTransformFn(el,value,name){var $el=$(el),data=$el.data('transformFn')||{},newData={},i,transObj={},val,trans,scale,values,skew;newData[name]=value;$.extend(data,newData);for(i in data){val=data[i];transObj[i]=transformCSS3[i](val);}trans=transObj.translate||'';scale=transObj.scale||'';skew=transObj.skew||'';values=trans+scale+skew;$el.data('transformFn',data);el.style[t.supportCSSTransform]=values;}$.cssNumber.scale=true;$.cssHooks.scale={set:function(elem,value){if(typeof value==='string'){value=parseFloat(value);}setTransformFn(elem,value,'scale');},get:function(elem,computed){var transform=$.data(elem,'transformFn');return(transform&&transform.scale)?transform.scale:1;}};$.fx.step.scale=function(fx){$.cssHooks.scale.set(fx.elem,fx.now+fx.unit);};$.cssNumber.translate=true;$.cssHooks.translate={set:function(elem,value){setTransformFn(elem,value,'translate');},get:function(elem,computed){var transform=$.data(elem,'transformFn');return(transform&&transform.translate)?transform.translate:[0,0];}};$.cssNumber.skew=true;$.cssHooks.skew={set:function(elem,value){setTransformFn(elem,value,'skew');},get:function(elem,computed){var transform=$.data(elem,'transformFn');return(transform&&transform.skew)?transform.skew:[0,0];}};},_has3d:function(){var el=document.createElement('p'),has3d,transforms={'webkitTransform':'-webkit-transform','OTransform':'-o-transform','msTransform':'-ms-transform','MozTransform':'-moz-transform','transform':'transform'};document.body.insertBefore(el,null);for(var t in transforms){if(el.style[t]!==undefined){el.style[t]='translate3d(1px,1px,1px)';has3d=window.getComputedStyle(el).getPropertyValue(transforms[t]);}}document.body.removeChild(el);return(has3d!==undefined&&has3d.length>0&&has3d!=='none');},_prepareBlocks:function(){var t=this,element;t.blocks=t.$ul.children('.cbp-item');t.blocksAvailable=t.blocks;t.blocks.wrapInner('<div class="cbp-item-wrapper"></div>');if(t.options.caption){t._captionInit();}},_captionInit:function(){var t=this;t.$obj.addClass('cbp-caption-'+t.options.caption);t['_'+t.options.caption+'Caption']();},_captionDestroy:function(){var t=this;t.$obj.removeClass('cbp-caption-'+t.options.caption);t['_'+t.options.caption+'CaptionDestroy']();},_noneCaption:function(){},_noneCaptionDestroy:function(){},_pushTopCaption:function(){var t=this;if(t.browser==='ie8'||t.browser==='ie9'){$('.cbp-caption').on('mouseenter'+eventNamespace,function(){var me=$(this),normal=me.find('.cbp-caption-defaultWrap'),hover=me.find('.cbp-caption-activeWrap');normal.animate({bottom:'100%'},'fast');hover.animate({bottom:0},'fast');}).on('mouseleave'+eventNamespace,function(e){var me=$(this),normal=me.find('.cbp-caption-defaultWrap'),hover=me.find('.cbp-caption-activeWrap');normal.animate({bottom:0},'fast');hover.animate({bottom:'-100%'},'fast');});}},_pushTopCaptionDestroy:function(){var t=this;if(t.browser==='ie8'||t.browser==='ie9'){$('.cbp-caption').off('mouseenter'+eventNamespace+' mouseleave'+eventNamespace);$('.cbp-caption').find('.cbp-caption-defaultWrap').removeAttr('style');$('.cbp-caption').find('.cbp-caption-activeWrap').removeAttr('style');}},_pushDownCaption:function(){var t=this;if(t.browser==='ie8'||t.browser==='ie9'){$('.cbp-caption').on('mouseenter'+eventNamespace,function(){var me=$(this),normal=me.find('.cbp-caption-defaultWrap'),hover=me.find('.cbp-caption-activeWrap');normal.animate({bottom:'-100%'},'fast');hover.animate({bottom:0},'fast');}).on('mouseleave'+eventNamespace,function(e){var me=$(this),normal=me.find('.cbp-caption-defaultWrap'),hover=me.find('.cbp-caption-activeWrap');normal.animate({bottom:0},'fast');hover.animate({bottom:'100%'},'fast');});}},_pushDownCaptionDestroy:function(){var t=this;if(t.browser==='ie8'||t.browser==='ie9'){$('.cbp-caption').off('mouseenter'+eventNamespace+' mouseleave'+eventNamespace);$('.cbp-caption').find('.cbp-caption-defaultWrap').removeAttr('style');$('.cbp-caption').find('.cbp-caption-activeWrap').removeAttr('style');}},_revealBottomCaption:function(){var t=this;if(t.browser==='ie8'||t.browser==='ie9'){$('.cbp-caption').on('mouseenter'+eventNamespace,function(){var me=$(this),normal=me.find('.cbp-caption-defaultWrap');normal.animate({bottom:'100%'},'fast');}).on('mouseleave'+eventNamespace,function(e){var me=$(this),normal=me.find('.cbp-caption-defaultWrap');normal.animate({bottom:0},'fast');});}},_revealBottomCaptionDestroy:function(){var t=this;if(t.browser==='ie8'||t.browser==='ie9'){$('.cbp-caption').off('mouseenter'+eventNamespace+' mouseleave'+eventNamespace);$('.cbp-caption').find('.cbp-caption-defaultWrap').removeAttr('style');}},_revealTopCaption:function(){var t=this;if(t.browser==='ie8'||t.browser==='ie9'){$('.cbp-caption').on('mouseenter'+eventNamespace,function(){var me=$(this),normal=me.find('.cbp-caption-defaultWrap');normal.animate({bottom:'-100%'},'fast');}).on('mouseleave'+eventNamespace,function(e){var me=$(this),normal=me.find('.cbp-caption-defaultWrap');normal.animate({bottom:0},'fast');});}},_revealTopCaptionDestroy:function(){var t=this;if(t.browser==='ie8'||t.browser==='ie9'){$('.cbp-caption').off('mouseenter'+eventNamespace+' mouseleave'+eventNamespace);$('.cbp-caption').find('.cbp-caption-defaultWrap').removeAttr('style');}},_overlayBottomRevealCaption:function(){var t=this;if(t.browser==='ie8'||t.browser==='ie9'){$('.cbp-caption').on('mouseenter'+eventNamespace,function(){var me=$(this),normal=me.find('.cbp-caption-defaultWrap'),height=me.find('.cbp-caption-activeWrap').height();normal.animate({bottom:height},'fast');}).on('mouseleave'+eventNamespace,function(e){var me=$(this),normal=me.find('.cbp-caption-defaultWrap');normal.animate({bottom:0},'fast');});}},_overlayBottomRevealCaptionDestroy:function(){var t=this;if(t.browser==='ie8'||t.browser==='ie9'){$('.cbp-caption').off('mouseenter'+eventNamespace+' mouseleave'+eventNamespace);$('.cbp-caption').find('.cbp-caption-defaultWrap').removeAttr('style');}},_overlayBottomPushCaption:function(){var t=this;if(t.browser==='ie8'||t.browser==='ie9'){$('.cbp-caption').on('mouseenter'+eventNamespace,function(){var me=$(this),normal=me.find('.cbp-caption-defaultWrap'),hover=me.find('.cbp-caption-activeWrap'),height=hover.height();normal.animate({bottom:height},'fast');hover.animate({bottom:0},'fast');}).on('mouseleave'+eventNamespace,function(e){var me=$(this),normal=me.find('.cbp-caption-defaultWrap'),hover=me.find('.cbp-caption-activeWrap'),height=hover.height();normal.animate({bottom:0},'fast');hover.animate({bottom:-height},'fast');});}},_overlayBottomPushCaptionDestroy:function(){var t=this;if(t.browser==='ie8'||t.browser==='ie9'){$('.cbp-caption').off('mouseenter'+eventNamespace+' mouseleave'+eventNamespace);$('.cbp-caption').find('.cbp-caption-defaultWrap').removeAttr('style');$('.cbp-caption').find('.cbp-caption-activeWrap').removeAttr('style');}},_overlayBottomCaption:function(){var t=this;if(t.browser==='ie8'||t.browser==='ie9'){$('.cbp-caption').on('mouseenter'+eventNamespace,function(){$(this).find('.cbp-caption-activeWrap').animate({bottom:0},'fast');}).on('mouseleave'+eventNamespace,function(e){var hover=$(this).find('.cbp-caption-activeWrap');hover.animate({bottom:-hover.height()},'fast');});}},_overlayBottomCaptionDestroy:function(){var t=this;if(t.browser==='ie8'||t.browser==='ie9'){$('.cbp-caption').off('mouseenter'+eventNamespace+' mouseleave'+eventNamespace);$('.cbp-caption').find('.cbp-caption-activeWrap').removeAttr('style');}},_moveRightCaption:function(){var t=this;if(t.browser==='ie8'||t.browser==='ie9'){$('.cbp-caption').on('mouseenter'+eventNamespace,function(){$(this).find('.cbp-caption-activeWrap').animate({left:0},'fast');}).on('mouseleave'+eventNamespace,function(){var hover=$(this).find('.cbp-caption-activeWrap');hover.animate({left:-hover.width()},'fast');});}},_moveRightCaptionDestroy:function(){var t=this;if(t.browser==='ie8'||t.browser==='ie9'){$('.cbp-caption').off('mouseenter'+eventNamespace+' mouseleave'+eventNamespace);$('.cbp-caption').find('.cbp-caption-activeWrap').removeAttr('style');}},_revealLeftCaption:function(){var t=this;if(t.browser==='ie8'||t.browser==='ie9'){$('.cbp-caption').on('mouseenter'+eventNamespace,function(){$(this).find('.cbp-caption-activeWrap').animate({left:0},'fast');}).on('mouseleave'+eventNamespace,function(){var hover=$(this).find('.cbp-caption-activeWrap');hover.animate({left:hover.width()},'fast');});}},_revealLeftCaptionDestroy:function(){var t=this;if(t.browser==='ie8'||t.browser==='ie9'){$('.cbp-caption').off('mouseenter'+eventNamespace+' mouseleave'+eventNamespace);$('.cbp-caption').find('.cbp-caption-activeWrap').removeAttr('style');}},_minimalCaption:function(){var t=this;},_minimalCaptionDestroy:function(){var t=this;},_fadeInCaption:function(){var t=this,opacity;if(t.browser==='ie8'||t.browser==='ie9'){opacity=(t.browser==='ie9')?1:0.8;$('.cbp-caption').on('mouseenter'+eventNamespace,function(){$(this).find('.cbp-caption-activeWrap').animate({opacity:opacity},'fast');}).on('mouseleave'+eventNamespace,function(){$(this).find('.cbp-caption-activeWrap').animate({opacity:0},'fast');});}},_fadeInCaptionDestroy:function(){var t=this;if(t.browser==='ie8'||t.browser==='ie9'){$('.cbp-caption').off('mouseenter'+eventNamespace+' mouseleave'+eventNamespace);$('.cbp-caption').find('.cbp-caption-activeWrap').removeAttr('style');}},_overlayRightAlongCaption:function(){var t=this;if(t.browser==='ie8'||t.browser==='ie9'){$('.cbp-caption').on('mouseenter'+eventNamespace,function(){var me=$(this),normal=me.find('.cbp-caption-defaultWrap'),hover=me.find('.cbp-caption-activeWrap');normal.animate({left:hover.width()/2},'fast');hover.animate({left:0},'fast');}).on('mouseleave'+eventNamespace,function(e){var me=$(this),normal=me.find('.cbp-caption-defaultWrap'),hover=me.find('.cbp-caption-activeWrap');normal.animate({left:0},'fast');hover.animate({left:-hover.width()},'fast');});}},_overlayRightAlongCaptionDestroy:function(){var t=this;if(t.browser==='ie8'||t.browser==='ie9'){$('.cbp-caption').off('mouseenter'+eventNamespace+' mouseleave'+eventNamespace);$('.cbp-caption').find('.cbp-caption-defaultWrap').removeAttr('style');$('.cbp-caption').find('.cbp-caption-activeWrap').removeAttr('style');}},_overlayBottomAlongCaption:function(){var t=this;if(t.browser==='ie8'||t.browser==='ie9'){$('.cbp-caption').on('mouseenter'+eventNamespace,function(){var me=$(this),normal=me.find('.cbp-caption-defaultWrap'),hover=me.find('.cbp-caption-activeWrap');normal.animate({bottom:hover.height()/2},'fast');hover.animate({bottom:0},'fast');}).on('mouseleave'+eventNamespace,function(e){var me=$(this),normal=me.find('.cbp-caption-defaultWrap'),hover=me.find('.cbp-caption-activeWrap');normal.animate({bottom:0},'fast');hover.animate({bottom:-hover.height()},'fast');});}},_overlayBottomAlongCaptionDestroy:function(){var t=this;if(t.browser==='ie8'||t.browser==='ie9'){$('.cbp-caption').off('mouseenter'+eventNamespace+' mouseleave'+eventNamespace);$('.cbp-caption').find('.cbp-caption-defaultWrap').removeAttr('style');$('.cbp-caption').find('.cbp-caption-activeWrap').removeAttr('style');}},_zoomCaption:function(){var t=this,opacity;if(t.browser==='ie8'||t.browser==='ie9'){opacity=(t.browser==='ie9')?1:0.8;$('.cbp-caption').on('mouseenter'+eventNamespace,function(){$(this).find('.cbp-caption-activeWrap').animate({opacity:opacity},'fast');}).on('mouseleave'+eventNamespace,function(){$(this).find('.cbp-caption-activeWrap').animate({opacity:0},'fast');});}},_zoomCaptionDestroy:function(){var t=this;if(t.browser==='ie8'||t.browser==='ie9'){$('.cbp-caption').off('mouseenter'+eventNamespace+' mouseleave'+eventNamespace);$('.cbp-caption').find('.cbp-caption-activeWrap').removeAttr('style');}},_initCSSandEvents:function(){var t=this,n,width,currentWidth,windowWidth;$(window).on('resize'+eventNamespace,function(){if(n){clearTimeout(n);}n=setTimeout(function(){if(t.browser==='ie8'){windowWidth=$(window).width();if(currentWidth===undefined||currentWidth!=windowWidth){currentWidth=windowWidth;}else{return;}}t.$obj.removeClass('cbp-no-transition cbp-appendItems-loading');if(t.options.gridAdjustment==='responsive'){t._responsiveLayout();}t._layout();t._processStyle(t.transition);t._resizeMainContainer(t.transition);if(t.lightbox){t.lightbox.resizeImage();}if(t.singlePage){if(t.singlePage.options.singlePageStickyNavigation){width=t.singlePage.wrap[0].clientWidth;if(width>0){t.singlePage.navigationWrap.width(width);t.singlePage.navigation.width(width);}}}if(t.singlePageInline&&t.singlePageInline.isOpen){t.singlePageInline.close();}},50);});},_load:function(){var t=this,imgs=[],i,img,propertyValue,src,matchUrl=/url\((['"]?)(.*?)\1\)/g;propertyValue=t.$obj.children().css('backgroundImage');if(propertyValue){var match;while((match=matchUrl.exec(propertyValue))){imgs.push({src:match[2]});}}t.$obj.find('*').each(function(){var elem=$(this);if(elem.is('img:uncached')){imgs.push({src:elem.attr('src'),element:elem[0]});}propertyValue=elem.css('backgroundImage');if(propertyValue){var match;while((match=matchUrl.exec(propertyValue))){imgs.push({src:match[2],element:elem[0]});}}});var imgsLength=imgs.length,imgsLoaded=0;if(imgsLength===0){t._beforeDisplay();}var loadImage=function(){imgsLoaded++;if(imgsLoaded==imgsLength){t._beforeDisplay();return false;}};for(i=0;i<imgsLength;i++){img=new Image();$(img).on('load'+eventNamespace+' error'+eventNamespace,loadImage);img.src=imgs[i].src;}},_beforeDisplay:function(){var t=this;if(t.options.animationType){if(t['_'+t.options.animationType+'Init']){t['_'+t.options.animationType+'Init']();}t.$obj.addClass('cbp-animation-'+t.options.animationType);t.localColumnWidth=t.blocks.eq(0).outerWidth()+t.options.gapVertical;if(t.options.defaultFilter===''||t.options.defaultFilter==='*'){t._display();}else{t.filter(t.options.defaultFilter,function(){t._display();},t);}}},_display:function(){var t=this,i,item;if(t.options.gridAdjustment==='responsive'){t._responsiveLayout();}t._layout();t._processStyle('css');t._resizeMainContainer('css');if(t.options.displayType==='lazyLoading'||t.options.displayType==='fadeIn'){t.$ul.animate({opacity:1},t.options.displayTypeSpeed);}if(t.options.displayType==='fadeInToTop'){t.$ul.animate({opacity:1,marginTop:0},t.options.displayTypeSpeed);}if(t.options.displayType==='sequentially'){i=0;t.blocks.css('opacity',0);(function displayItems(){item=t.blocksAvailable.eq(i++);if(item.length){item.animate({opacity:1});setTimeout(displayItems,t.options.displayTypeSpeed);}})();}if(t.options.displayType==='bottomToTop'){i=0;t.blocks.css({'opacity':0,marginTop:80});(function displayItems(){item=t.blocksAvailable.eq(i++);if(item.length){item.animate({opacity:1,marginTop:0},400);setTimeout(displayItems,t.options.displayTypeSpeed);}})();}setTimeout(function(){t.$obj.removeClass('cbp-loading');t._triggerEvent('initFinish');t.$obj.trigger('initComplete');t.$obj.addClass('cbp-ready');},0);t.lightbox=null;if(t.$obj.find(t.options.lightboxDelegate)){t.lightbox=Object.create(popup);t.lightbox.init(t,'lightbox');t.$obj.on('click'+eventNamespace,t.options.lightboxDelegate,function(e){t.lightbox.openLightbox(t.blocksAvailable,this);e.preventDefault();});}t.singlePage=null;if(t.$obj.find(t.options.singlePageDelegate)){t.singlePage=Object.create(popup);t.singlePage.init(t,'singlePage');t.$obj.on('click'+eventNamespace,t.options.singlePageDelegate,function(e){e.preventDefault();t.singlePage.openSinglePage(t.blocksAvailable,this);});}t.singlePageInline=null;if(t.$obj.find(t.options.singlePageInlineDelegate)){t.singlePageInline=Object.create(popup);t.singlePageInline.init(t,'singlePageInline');t.$obj.on('click'+eventNamespace,t.options.singlePageInlineDelegate,function(e){t.singlePageInline.openSinglePageInline(t.blocksAvailable,this);e.preventDefault();});}},_layout:function(){var t=this;t._layoutReset();t.blocksAvailable.each(function(index,el){var $me=$(el),colNr=Math.ceil($me.outerWidth()/t.localColumnWidth),singlePageInlineGap=0;colNr=Math.min(colNr,t.cols);if(t.singlePageInline&&(index>=t.singlePageInline.matrice[0]&&index<=t.singlePageInline.matrice[1])){singlePageInlineGap=t.singlePageInline.height;}if(colNr===1){t._placeBlocks($me,t.colVert,singlePageInlineGap);}else{var count=t.cols+1-colNr,groupVert=[],groupColVert,i;for(i=0;i<count;i++){groupColVert=t.colVert.slice(i,i+colNr);groupVert[i]=Math.max.apply(Math,groupColVert);}t._placeBlocks($me,groupVert,singlePageInlineGap);}});},_layoutReset:function(){var c,t=this,columnData;if(t.options.gridAdjustment==='alignCenter'){t.$obj.attr('style','');t.width=t.$obj.width();t.cols=Math.max(Math.floor((t.width+t.options.gapVertical)/t.localColumnWidth),1);t.width=t.cols*t.localColumnWidth-t.options.gapVertical;t.$obj.css('max-width',t.width);}else{t.width=t.$obj.width();t.cols=Math.max(Math.floor((t.width+t.options.gapVertical)/t.localColumnWidth),1);}t.colVert=[];c=t.cols;while(c--){t.colVert.push(0);}},_responsiveLayout:function(){var t=this,procent,extra;if(!t.columnWidthCache){t.columnWidthCache=t.localColumnWidth;}else{t.localColumnWidth=t.columnWidthCache;}t.width=t.$obj.width()+t.options.gapVertical;t.cols=Math.max(Math.floor(t.width/t.localColumnWidth),1);extra=t.width%t.localColumnWidth;if(extra/t.localColumnWidth>0.5){t.localColumnWidth=t.localColumnWidth-(t.localColumnWidth-extra)/(t.cols+1);}else{t.localColumnWidth=t.localColumnWidth+extra/t.cols;}t.localColumnWidth=parseInt(t.localColumnWidth,10);procent=t.localColumnWidth/t.columnWidthCache;t.blocks.each(function(index,el){var me=$(this),data=$.data(this,'cbp-wxh');if(!data){data=$.data(this,'cbp-wxh',{width:me.outerWidth(),height:me.outerHeight()});}me.css('width',t.localColumnWidth-t.options.gapVertical);me.css('height',Math.floor(data.height*procent));});if(t.blocksClone){t.blocksClone.each(function(index,el){var me=$(this),data=$.data(this,'cbp-wxh');if(!data){data=$.data(this,'cbp-wxh',{width:me.outerWidth(),height:me.outerHeight()});}me.css('width',t.localColumnWidth-t.options.gapVertical);me.css('height',Math.floor(data.height*procent));});}},_resizeMainContainer:function(transition,customHeight){var t=this;customHeight=customHeight||0;t.height=Math.max.apply(Math,t.colVert)+customHeight;t.$obj[transition]({height:t.height-t.options.gapHorizontal},400);},_processStyle:function(transition){var t=this;for(var i=t.styleQueue.length-1;i>=0;i--){t.styleQueue[i].$el[transition](t.styleQueue[i].style);}t.styleQueue=[];},_placeBlocks:function($block,vert,singlePageInlineGap){var t=this,minVert=Math.min.apply(Math,vert),coll=0,x,y,setHeight,colsLen,i,len;for(i=0,len=vert.length;i<len;i++){if(vert[i]===minVert){coll=i;break;}}if(t.singlePageInline&&singlePageInlineGap!==0){t.singlePageInline.top=minVert;}minVert+=singlePageInlineGap;x=Math.round(t.localColumnWidth*coll);y=Math.round(minVert);t.styleQueue.push({$el:$block,style:(t.supportCSSTransform)?t._withCSS3(x,y):t._withCSS2(x,y)});setHeight=minVert+$block.outerHeight()+t.options.gapHorizontal;colsLen=t.cols+1-len;for(i=0;i<colsLen;i++){t.colVert[coll+i]=setHeight;}},_withCSS2:function(x,y){return{left:x,top:y};},_withCSS3:function(x,y){return{translate:[x,y]};},_duplicateContent:function(cssObj){var t=this;t.$ulClone=t.$ul.clone();t.blocksClone=t.$ulClone.children();t.$ulClone.css(cssObj);t.ulHidden='clone';t.$obj.append(t.$ulClone);},_fadeOutFilter:function(on2offBlocks,off2onBlocks,filter){var t=this;if(filter!=='*'){off2onBlocks=off2onBlocks.filter(filter);on2offBlocks=t.blocks.not('.cbp-item-hidden').not(filter).addClass('cbp-item-hidden');}off2onBlocks.removeClass('cbp-item-hidden');t.blocksAvailable=t.blocks.filter(filter);if(on2offBlocks.length){t.styleQueue.push({$el:on2offBlocks,style:{opacity:0}});}if(off2onBlocks.length){t.styleQueue.push({$el:off2onBlocks,style:{opacity:1}});}t._layout();t._processStyle(t.transitionByFilter);t._resizeMainContainer(t.transition);setTimeout(function(){t._filterFinish();},400);},_quicksandFilter:function(on2offBlocks,off2onBlocks,filter){var t=this;if(filter!=='*'){off2onBlocks=off2onBlocks.filter(filter);on2offBlocks=t.blocks.not('.cbp-item-hidden').not(filter).addClass('cbp-item-hidden');}off2onBlocks.removeClass('cbp-item-hidden');t.blocksAvailable=t.blocks.filter(filter);if(on2offBlocks.length){t.styleQueue.push({$el:on2offBlocks,style:{scale:0.01,opacity:0}});}if(off2onBlocks.length){t.styleQueue.push({$el:off2onBlocks,style:{scale:1,opacity:1}});}t._layout();t._processStyle(t.transitionByFilter);t._resizeMainContainer(t.transition);setTimeout(function(){t._filterFinish();},400);},_flipOutFilter:function(on2offBlocks,off2onBlocks,filter){var t=this;if(filter!=='*'){off2onBlocks=off2onBlocks.filter(filter);on2offBlocks=t.blocks.not('.cbp-item-hidden').not(filter).addClass('cbp-item-hidden');}off2onBlocks.removeClass('cbp-item-hidden');t.blocksAvailable=t.blocks.filter(filter);if(on2offBlocks.length){if(t.browser==='ie8'||t.browser==='ie9'){t.styleQueue.push({$el:on2offBlocks,style:{opacity:0}});}else{on2offBlocks.find('.cbp-item-wrapper').removeClass('cbp-animation-flipOut-in').addClass('cbp-animation-flipOut-out');}}if(off2onBlocks.length){if(t.browser==='ie8'||t.browser==='ie9'){t.styleQueue.push({$el:off2onBlocks,style:{opacity:1}});}else{off2onBlocks.find('.cbp-item-wrapper').removeClass('cbp-animation-flipOut-out').addClass('cbp-animation-flipOut-in');}}t._layout();t._processStyle(t.transitionByFilter);t._resizeMainContainer(t.transition);setTimeout(function(){t._filterFinish();},400);},_flipBottomFilter:function(on2offBlocks,off2onBlocks,filter){var t=this;if(filter!=='*'){off2onBlocks=off2onBlocks.filter(filter);on2offBlocks=t.blocks.not('.cbp-item-hidden').not(filter).addClass('cbp-item-hidden');}off2onBlocks.removeClass('cbp-item-hidden');t.blocksAvailable=t.blocks.filter(filter);if(on2offBlocks.length){if(t.browser==='ie8'||t.browser==='ie9'){t.styleQueue.push({$el:on2offBlocks,style:{opacity:0}});}else{on2offBlocks.find('.cbp-item-wrapper').removeClass('cbp-animation-flipBottom-in').addClass('cbp-animation-flipBottom-out');}}if(off2onBlocks.length){if(t.browser==='ie8'||t.browser==='ie9'){t.styleQueue.push({$el:off2onBlocks,style:{opacity:1}});}else{off2onBlocks.find('.cbp-item-wrapper').removeClass('cbp-animation-flipBottom-out').addClass('cbp-animation-flipBottom-in');}}t._layout();t._processStyle(t.transitionByFilter);t._resizeMainContainer(t.transition);setTimeout(function(){t._filterFinish();},400);},_scaleSidesFilter:function(on2offBlocks,off2onBlocks,filter){var t=this;if(filter!=='*'){off2onBlocks=off2onBlocks.filter(filter);on2offBlocks=t.blocks.not('.cbp-item-hidden').not(filter).addClass('cbp-item-hidden');}off2onBlocks.removeClass('cbp-item-hidden');t.blocksAvailable=t.blocks.filter(filter);if(on2offBlocks.length){if(t.browser==='ie8'||t.browser==='ie9'){t.styleQueue.push({$el:on2offBlocks,style:{opacity:0}});}else{on2offBlocks.find('.cbp-item-wrapper').removeClass('cbp-animation-scaleSides-in').addClass('cbp-animation-scaleSides-out');}}if(off2onBlocks.length){if(t.browser==='ie8'||t.browser==='ie9'){t.styleQueue.push({$el:off2onBlocks,style:{opacity:1}});}else{off2onBlocks.find('.cbp-item-wrapper').removeClass('cbp-animation-scaleSides-out').addClass('cbp-animation-scaleSides-in');}}t._layout();t._processStyle(t.transitionByFilter);t._resizeMainContainer(t.transition);setTimeout(function(){t._filterFinish();},400);},_skewFilter:function(on2offBlocks,off2onBlocks,filter){var t=this;if(filter!=='*'){off2onBlocks=off2onBlocks.filter(filter);on2offBlocks=t.blocks.not('.cbp-item-hidden').not(filter).addClass('cbp-item-hidden');}off2onBlocks.removeClass('cbp-item-hidden');t.blocksAvailable=t.blocks.filter(filter);if(on2offBlocks.length){t.styleQueue.push({$el:on2offBlocks,style:{skew:[50,0],scale:0.01,opacity:0}});}if(off2onBlocks.length){t.styleQueue.push({$el:off2onBlocks,style:{skew:[0,0],scale:1,opacity:1}});}t._layout();t._processStyle(t.transitionByFilter);t._resizeMainContainer(t.transition);setTimeout(function(){t._filterFinish();},400);},_sequentiallyInit:function(){this.transitionByFilter='css';},_sequentiallyFilter:function(on2offBlocks,off2onBlocks,filter){var t=this,tempBlocks=t.blocks,oldBlocksAvailable=t.blocksAvailable;t.blocksAvailable=t.blocks.filter(filter);t.$obj.addClass('cbp-no-transition');if(t.browser==='ie8'||t.browser==='ie9'){oldBlocksAvailable[t.transition]({top:'-=30',opacity:0},300);}else{oldBlocksAvailable[t.transition]({top:-30,opacity:0});}setTimeout(function(){if(filter!=='*'){off2onBlocks=off2onBlocks.filter(filter);on2offBlocks=t.blocks.not('.cbp-item-hidden').not(filter).addClass('cbp-item-hidden');}off2onBlocks.removeClass('cbp-item-hidden');if(on2offBlocks.length){on2offBlocks.css({'display':'none'});}if(off2onBlocks.length){off2onBlocks.css('display','block');}t._layout();t._processStyle(t.transitionByFilter);t._resizeMainContainer(t.transition);if(t.browser==='ie8'||t.browser==='ie9'){t.blocksAvailable.css('top','-=30');}var i=0,item;(function displayItems(){item=t.blocksAvailable.eq(i++);if(item.length){if(t.browser==='ie8'||t.browser==='ie9'){item[t.transition]({top:'+=30',opacity:1});}else{item[t.transition]({top:0,opacity:1});}setTimeout(displayItems,130);}else{setTimeout(function(){t._filterFinish();},600);}})();},600);},_fadeOutTopInit:function(){this.transitionByFilter='css';},_fadeOutTopFilter:function(on2offBlocks,off2onBlocks,filter){var t=this;t.blocksAvailable=t.blocks.filter(filter);if(t.browser==='ie8'||t.browser==='ie9'){t.$ul[t.transition]({top:-30,opacity:0},350);}else{t.$ul[t.transition]({top:-30,opacity:0});}t.$obj.addClass('cbp-no-transition');setTimeout(function(){if(filter!=='*'){off2onBlocks=off2onBlocks.filter(filter);on2offBlocks=t.blocks.not('.cbp-item-hidden').not(filter).addClass('cbp-item-hidden');}off2onBlocks.removeClass('cbp-item-hidden');if(on2offBlocks.length){on2offBlocks.css('opacity',0);}if(off2onBlocks.length){off2onBlocks.css('opacity',1);}t._layout();t._processStyle(t.transitionByFilter);t._resizeMainContainer(t.transition);if(t.browser==='ie8'||t.browser==='ie9'){t.$ul[t.transition]({top:0,opacity:1},350);}else{t.$ul[t.transition]({top:0,opacity:1});}setTimeout(function(){t._filterFinish();},400);},400);},_boxShadowInit:function(){var t=this;if(t.browser==='ie8'||t.browser==='ie9'){t.options.animationType='fadeOut';}else{t.blocksAvailable.append('<div class="cbp-animation-boxShadowMask"></div>');}},_boxShadowFilter:function(on2offBlocks,off2onBlocks,filter){var t=this;if(filter!=='*'){off2onBlocks=off2onBlocks.filter(filter);on2offBlocks=t.blocks.not('.cbp-item-hidden').not(filter).addClass('cbp-item-hidden');}off2onBlocks.removeClass('cbp-item-hidden');var boxShadowMask=t.blocks.find('.cbp-animation-boxShadowMask');boxShadowMask.addClass('cbp-animation-boxShadowShow');boxShadowMask.removeClass('cbp-animation-boxShadowActive cbp-animation-boxShadowInactive');t.blocksAvailable=t.blocks.filter(filter);var toAnimate={};if(on2offBlocks.length){on2offBlocks.find('.cbp-animation-boxShadowMask').addClass('cbp-animation-boxShadowActive');t.styleQueue.push({$el:on2offBlocks,style:{opacity:0}});toAnimate=on2offBlocks.last();}if(off2onBlocks.length){off2onBlocks.find('.cbp-animation-boxShadowMask').addClass('cbp-animation-boxShadowInactive');t.styleQueue.push({$el:off2onBlocks,style:{opacity:1}});toAnimate=off2onBlocks.last();}t._layout();if(toAnimate.length){toAnimate.one(t.transitionEnd,function(){boxShadowMask.removeClass('cbp-animation-boxShadowShow');t._filterFinish();});}else{boxShadowMask.removeClass('cbp-animation-boxShadowShow');t._filterFinish();}t._processStyle(t.transitionByFilter);t._resizeMainContainer(t.transition);},_bounceLeftInit:function(){var t=this;t._duplicateContent({left:'-100%',opacity:0});t.transitionByFilter='css';t.$ul.addClass('cbp-wrapper-front');},_bounceLeftFilter:function(on2offBlocks,off2onBlocks,filter){var t=this,ul,ulChildren,ulTohide;t.$obj.addClass('cbp-no-transition');if(t.ulHidden==='clone'){t.ulHidden='first';ul=t.$ulClone;ulTohide=t.$ul;ulChildren=t.blocksClone;}else{t.ulHidden='clone';ul=t.$ul;ulTohide=t.$ulClone;ulChildren=t.blocks;}off2onBlocks=ulChildren.filter('.cbp-item-hidden');if(filter!=='*'){off2onBlocks=off2onBlocks.filter(filter);ulChildren.not('.cbp-item-hidden').not(filter).addClass('cbp-item-hidden');}off2onBlocks.removeClass('cbp-item-hidden');t.blocksAvailable=ulChildren.filter(filter);t._layout();ulTohide[t.transition]({left:'-100%',opacity:0}).removeClass('cbp-wrapper-front').addClass('cbp-wrapper-back');ul[t.transition]({left:0,opacity:1}).addClass('cbp-wrapper-front').removeClass('cbp-wrapper-back');t._processStyle(t.transitionByFilter);t._resizeMainContainer(t.transition);setTimeout(function(){t._filterFinish();},400);},_bounceTopInit:function(){var t=this;t._duplicateContent({top:'-100%',opacity:0});t.transitionByFilter='css';t.$ul.addClass('cbp-wrapper-front');},_bounceTopFilter:function(on2offBlocks,off2onBlocks,filter){var t=this,ul,ulChildren,ulTohide;t.$obj.addClass('cbp-no-transition');if(t.ulHidden==='clone'){t.ulHidden='first';ul=t.$ulClone;ulTohide=t.$ul;ulChildren=t.blocksClone;}else{t.ulHidden='clone';ul=t.$ul;ulTohide=t.$ulClone;ulChildren=t.blocks;}off2onBlocks=ulChildren.filter('.cbp-item-hidden');if(filter!=='*'){off2onBlocks=off2onBlocks.filter(filter);ulChildren.not('.cbp-item-hidden').not(filter).addClass('cbp-item-hidden');}off2onBlocks.removeClass('cbp-item-hidden');t.blocksAvailable=ulChildren.filter(filter);t._layout();ulTohide[t.transition]({top:'-100%',opacity:0}).removeClass('cbp-wrapper-front').addClass('cbp-wrapper-back');ul[t.transition]({top:0,opacity:1}).addClass('cbp-wrapper-front').removeClass('cbp-wrapper-back');t._processStyle(t.transitionByFilter);t._resizeMainContainer(t.transition);setTimeout(function(){t._filterFinish();},400);},_bounceBottomInit:function(){var t=this;t._duplicateContent({top:'100%',opacity:0});t.transitionByFilter='css';},_bounceBottomFilter:function(on2offBlocks,off2onBlocks,filter){var t=this,ul,ulChildren,ulTohide;t.$obj.addClass('cbp-no-transition');if(t.ulHidden==='clone'){t.ulHidden='first';ul=t.$ulClone;ulTohide=t.$ul;ulChildren=t.blocksClone;}else{t.ulHidden='clone';ul=t.$ul;ulTohide=t.$ulClone;ulChildren=t.blocks;}off2onBlocks=ulChildren.filter('.cbp-item-hidden');if(filter!=='*'){off2onBlocks=off2onBlocks.filter(filter);ulChildren.not('.cbp-item-hidden').not(filter).addClass('cbp-item-hidden');}off2onBlocks.removeClass('cbp-item-hidden');t.blocksAvailable=ulChildren.filter(filter);t._layout();ulTohide[t.transition]({top:'100%',opacity:0}).removeClass('cbp-wrapper-front').addClass('cbp-wrapper-back');ul[t.transition]({top:0,opacity:1}).addClass('cbp-wrapper-front').removeClass('cbp-wrapper-back');t._processStyle(t.transitionByFilter);t._resizeMainContainer(t.transition);setTimeout(function(){t._filterFinish();},400);},_moveLeftInit:function(){var t=this;t._duplicateContent({left:'100%',opacity:0});t.$ulClone.addClass('no-trans');t.transitionByFilter='css';},_moveLeftFilter:function(on2offBlocks,off2onBlocks,filter){var t=this,ul,ulChildren,ulTohide;if(filter!=='*'){off2onBlocks=off2onBlocks.filter(filter);on2offBlocks=t.blocks.not('.cbp-item-hidden').not(filter).addClass('cbp-item-hidden');}off2onBlocks.removeClass('cbp-item-hidden');t.$obj.addClass('cbp-no-transition');if(t.ulHidden==='clone'){t.ulHidden='first';ul=t.$ulClone;ulTohide=t.$ul;ulChildren=t.blocksClone;}else{t.ulHidden='clone';ul=t.$ul;ulTohide=t.$ulClone;ulChildren=t.blocks;}ulChildren.css('opacity',0);ulChildren.addClass('cbp-item-hidden');t.blocksAvailable=ulChildren.filter(filter);t.blocksAvailable.css('opacity',1);t.blocksAvailable.removeClass('cbp-item-hidden');t._layout();ulTohide[t.transition]({left:'-100%',opacity:0});ul.removeClass('no-trans');if(t.transition==='css'){ul[t.transition]({left:0,opacity:1});ulTohide.one(t.transitionEnd,function(){ulTohide.addClass('no-trans').css({left:'100%',opacity:0});t._filterFinish();});}else{ul[t.transition]({left:0,opacity:1},function(){ulTohide.addClass('no-trans').css({left:'100%',opacity:0});t._filterFinish();});}t._processStyle(t.transitionByFilter);t._resizeMainContainer(t.transition);},_slideLeftInit:function(){var t=this;t._duplicateContent({});t.$ul.addClass('cbp-wrapper-front');t.$ulClone.css('opacity',0);t.transitionByFilter='css';},_slideLeftFilter:function(on2offBlocks,off2onBlocks,filter){var t=this,ul,ulChildren,ulTohide,slideOut,slideIn,toAnimate;t.blocks.show();t.blocksClone.show();if(filter!=='*'){off2onBlocks=off2onBlocks.filter(filter);on2offBlocks=t.blocks.not('.cbp-item-hidden').not(filter).addClass('cbp-item-hidden');}off2onBlocks.removeClass('cbp-item-hidden');t.$obj.addClass('cbp-no-transition');t.blocks.find('.cbp-item-wrapper').removeClass('cbp-animation-slideLeft-out cbp-animation-slideLeft-in');t.blocksClone.find('.cbp-item-wrapper').removeClass('cbp-animation-slideLeft-out cbp-animation-slideLeft-in');t.$ul.css({'opacity':1});t.$ulClone.css({'opacity':1});if(t.ulHidden==='clone'){t.ulHidden='first';slideOut=t.blocks;slideIn=t.blocksClone;ulChildren=t.blocksClone;t.$ul.removeClass('cbp-wrapper-front');t.$ulClone.addClass('cbp-wrapper-front');}else{t.ulHidden='clone';slideOut=t.blocksClone;slideIn=t.blocks;ulChildren=t.blocks;t.$ul.addClass('cbp-wrapper-front');t.$ulClone.removeClass('cbp-wrapper-front');}ulChildren.css('opacity',0);ulChildren.addClass('cbp-item-hidden');t.blocksAvailable=ulChildren.filter(filter);t.blocksAvailable.css({'opacity':1});t.blocksAvailable.removeClass('cbp-item-hidden');t._layout();if(t.transition==='css'){slideOut.find('.cbp-item-wrapper').addClass('cbp-animation-slideLeft-out');slideIn.find('.cbp-item-wrapper').addClass('cbp-animation-slideLeft-in');toAnimate=slideOut.find('.cbp-item-wrapper').last();if(toAnimate.length){toAnimate.one(t.animationEnd,function(){t._filterFinish();});}else{t._filterFinish();}}else{slideOut.find('.cbp-item-wrapper').animate({left:'-100%'},400,function(){t._filterFinish();});slideIn.find('.cbp-item-wrapper').css('left','100%');slideIn.find('.cbp-item-wrapper').animate({left:0},400);}t._processStyle(t.transitionByFilter);t._resizeMainContainer('animate');},_slideDelayInit:function(){this._wrapperFilterInit();},_slideDelayFilter:function(on2offBlocks,off2onBlocks,filter){this._wrapperFilter(on2offBlocks,off2onBlocks,filter,'slideDelay',true);},_3dflipInit:function(){this._wrapperFilterInit();},_3dflipFilter:function(on2offBlocks,off2onBlocks,filter){this._wrapperFilter(on2offBlocks,off2onBlocks,filter,'3dflip',true);},_rotateSidesInit:function(){this._wrapperFilterInit();},_rotateSidesFilter:function(on2offBlocks,off2onBlocks,filter){this._wrapperFilter(on2offBlocks,off2onBlocks,filter,'rotateSides',true);},_flipOutDelayInit:function(){this._wrapperFilterInit();},_flipOutDelayFilter:function(on2offBlocks,off2onBlocks,filter){this._wrapperFilter(on2offBlocks,off2onBlocks,filter,'flipOutDelay',false);},_foldLeftInit:function(){this._wrapperFilterInit();},_foldLeftFilter:function(on2offBlocks,off2onBlocks,filter){this._wrapperFilter(on2offBlocks,off2onBlocks,filter,'foldLeft',true);},_unfoldInit:function(){this._wrapperFilterInit();},_unfoldFilter:function(on2offBlocks,off2onBlocks,filter){this._wrapperFilter(on2offBlocks,off2onBlocks,filter,'unfold',true);},_scaleDownInit:function(){this._wrapperFilterInit();},_scaleDownFilter:function(on2offBlocks,off2onBlocks,filter){this._wrapperFilter(on2offBlocks,off2onBlocks,filter,'scaleDown',true);},_frontRowInit:function(){this._wrapperFilterInit();},_frontRowFilter:function(on2offBlocks,off2onBlocks,filter){this._wrapperFilter(on2offBlocks,off2onBlocks,filter,'frontRow',true);},_rotateRoomInit:function(){this._wrapperFilterInit();},_rotateRoomFilter:function(on2offBlocks,off2onBlocks,filter){this._wrapperFilter(on2offBlocks,off2onBlocks,filter,'rotateRoom',true);},_wrapperFilterInit:function(){var t=this;t._duplicateContent({});t.$ul.addClass('cbp-wrapper-front');t.$ulClone.css('opacity',0);t.transitionByFilter='css';},_wrapperFilter:function(on2offBlocks,off2onBlocks,filter,name,fadeOut){var t=this,ul,ulChildren,ulTohide,slideOut,slideIn,toAnimate;t.blocks.show();t.blocksClone.show();if(filter!=='*'){off2onBlocks=off2onBlocks.filter(filter);on2offBlocks=t.blocks.not('.cbp-item-hidden').not(filter).addClass('cbp-item-hidden');}off2onBlocks.removeClass('cbp-item-hidden');t.$obj.addClass('cbp-no-transition');t.blocks.find('.cbp-item-wrapper').removeClass('cbp-animation-'+name+'-out cbp-animation-'+name+'-in cbp-animation-'+name+'-fadeOut').css('style','');t.blocksClone.find('.cbp-item-wrapper').removeClass('cbp-animation-'+name+'-out cbp-animation-'+name+'-in cbp-animation-'+name+'-fadeOut').css('style','');t.$ul.css({'opacity':1});t.$ulClone.css({'opacity':1});if(t.ulHidden==='clone'){t.ulHidden='first';slideOut=t.blocks;slideIn=t.blocksClone;ulChildren=t.blocksClone;t.$ul.removeClass('cbp-wrapper-front');t.$ulClone.addClass('cbp-wrapper-front');}else{t.ulHidden='clone';slideOut=t.blocksClone;slideIn=t.blocks;ulChildren=t.blocks;t.$ul.addClass('cbp-wrapper-front');t.$ulClone.removeClass('cbp-wrapper-front');}slideOut=t.blocksAvailable;ulChildren.css('opacity',0);ulChildren.addClass('cbp-item-hidden');t.blocksAvailable=ulChildren.filter(filter);t.blocksAvailable.css({'opacity':1});t.blocksAvailable.removeClass('cbp-item-hidden');slideIn=t.blocksAvailable;t._layout();if(t.transition==='css'){var iii=0,kkk=0;slideIn.each(function(index,el){$(el).find('.cbp-item-wrapper').addClass('cbp-animation-'+name+'-in').css('animation-delay',(kkk/20)+'s');kkk++;});slideOut.each(function(index,el){if(kkk<=iii&&fadeOut){$(el).find('.cbp-item-wrapper').addClass('cbp-animation-'+name+'-fadeOut');}else{$(el).find('.cbp-item-wrapper').addClass('cbp-animation-'+name+'-out').css('animation-delay',(iii/20)+'s');}iii++;});toAnimate=slideOut.find('.cbp-item-wrapper').first();if(toAnimate.length){toAnimate.one(t.animationEnd,function(){t._filterFinish();if(t.browser==='ie10'||t.browser==='ie11'){setTimeout(function(){$('.cbp-item-wrapper').removeClass('cbp-animation-'+name+'-in');},300);}});}else{t._filterFinish();if(t.browser==='ie10'||t.browser==='ie11'){setTimeout(function(){$('.cbp-item-wrapper').removeClass('cbp-animation-'+name+'-in');},300);}}}else{slideOut.find('.cbp-item-wrapper').animate({left:'-100%'},400,function(){t._filterFinish();});slideIn.find('.cbp-item-wrapper').css('left','100%');slideIn.find('.cbp-item-wrapper').animate({left:0},400);}t._processStyle(t.transitionByFilter);t._resizeMainContainer('animate');},_filterFinish:function(){var t=this;t.isAnimating=false;t._triggerEvent('filterFinish');t.$obj.trigger('filterComplete');},_registerEvent:function(name,callbackFunction,oneTime){var t=this;if(!t.registeredEvents[name]){t.registeredEvents[name]=[];t.registeredEvents.push(name);}t.registeredEvents[name].push({func:callbackFunction,oneTime:oneTime||false});},_triggerEvent:function(name){var t=this;if(t.registeredEvents[name]){for(var i=t.registeredEvents[name].length-1;i>=0;i--){t.registeredEvents[name][i].func.call(t);if(t.registeredEvents[name][i].oneTime){t.registeredEvents[name].splice(i,1);}}}},init:function(options,callbackFunction){var t=$.data(this,'cubeportfolio');if(t){throw new Error('cubeportfolio is already initialized. Please destroy it before initialize again!');}t=$.data(this,'cubeportfolio',Object.create(pluginObject));t._main(this,options,callbackFunction);},destroy:function(callbackFunction){var t=$.data(this,'cubeportfolio');if(!t){throw new Error('cubeportfolio is not initialized. Please initialize before calling destroy method!');}if($.isFunction(callbackFunction)){t._registerEvent('destroyFinish',callbackFunction,true);}$.removeData(this,'cubeportfolio');$.each(t.blocks,function(index,value){$.removeData(this,'transformFn');$.removeData(this,'cbp-wxh');});t.$obj.removeClass('cbp cbp-loading cbp-ready cbp-no-transition');t.$ul.removeClass('cbp-wrapper-front cbp-wrapper-back cbp-wrapper no-trans').removeAttr('style');t.$obj.removeAttr('style');if(t.$ulClone){t.$ulClone.remove();}if(t.browser){t.$obj.removeClass('cbp-'+t.browser);}$(window).off('resize'+eventNamespace);if(t.lightbox){t.lightbox.destroy();}if(t.singlePage){t.singlePage.destroy();}if(t.singlePageInline){t.singlePageInline.destroy();}t.blocks.removeClass('cbp-item-hidden').removeAttr('style');t.blocks.find('.cbp-item-wrapper').children().unwrap();if(t.options.caption){t._captionDestroy();}if(t.options.animationType){if(t.options.animationType==='boxShadow'){$('.cbp-animation-boxShadowMask').remove();}t.$obj.removeClass('cbp-animation-'+t.options.animationType);}t._triggerEvent('destroyFinish');},filter:function(filterName,callbackFunction,context){var t=context||$.data(this,'cubeportfolio'),off2onBlocks,on2offBlocks;if(!t){throw new Error('cubeportfolio is not initialized. Please initialize before calling filter method!');}filterName=(filterName==='*'||filterName==='')?'*':filterName;if(t.isAnimating||t.defaultFilter==filterName){return;}if(t.browser==='ie8'||t.browser==='ie9'){t.$obj.removeClass('cbp-no-transition cbp-appendItems-loading');}else{t.obj.classList.remove('cbp-no-transition');t.obj.classList.remove('cbp-appendItems-loading');}t.defaultFilter=filterName;t.isAnimating=true;if($.isFunction(callbackFunction)){t._registerEvent('filterFinish',callbackFunction,true);}off2onBlocks=t.blocks.filter('.cbp-item-hidden');on2offBlocks=[];if(t.singlePageInline&&t.singlePageInline.isOpen){t.singlePageInline.close('promise',{callback:function(){t['_'+t.options.animationType+'Filter'](on2offBlocks,off2onBlocks,filterName);}});}else{t['_'+t.options.animationType+'Filter'](on2offBlocks,off2onBlocks,filterName);}},showCounter:function(elems){var t=$.data(this,'cubeportfolio');if(!t){throw new Error('cubeportfolio is not initialized. Please initialize before calling showCounter method!');}t.elems=elems;$.each(elems,function(index,val){var me=$(this),filterName=me.data('filter'),count=0;filterName=(filterName==='*'||filterName==='')?'*':filterName;count=t.blocks.filter(filterName).length;me.find('.cbp-filter-counter').text(count);me.find('.cbp-filter-counter').text(t.options.field_prefix+count+t.options.field_suffix);});},appendItems:function(items,callbackFunction){var me=this,t=$.data(me,'cubeportfolio'),defaultFilter,children,cloneItems,fewItems;if(!t){throw new Error('cubeportfolio is not initialized. Please initialize before calling appendItems method!');}if(t.singlePageInline&&t.singlePageInline.isOpen){t.singlePageInline.close('promise',{callback:function(){pluginObject._addItems.call(me,items,callbackFunction);}});}else{pluginObject._addItems.call(me,items,callbackFunction);}},_addItems:function(items,callbackFunction){var t=$.data(this,'cubeportfolio'),defaultFilter,children,cloneItems,fewItems;if($.isFunction(callbackFunction)){t._registerEvent('appendItemsFinish',callbackFunction,true);}t.$obj.addClass('cbp-no-transition cbp-appendItems-loading');items=$(items).css('opacity',0);items.filter('.cbp-item').wrapInner('<div class="cbp-item-wrapper"></div>');fewItems=items.filter(t.defaultFilter);if(t.ulHidden){if(t.ulHidden==='first'){items.appendTo(t.$ulClone);t.blocksClone=t.$ulClone.children();children=t.blocksClone;cloneItems=items.clone();cloneItems.appendTo(t.$ul);t.blocks=t.$ul.children();}else{items.appendTo(t.$ul);t.blocks=t.$ul.children();children=t.blocks;cloneItems=items.clone();cloneItems.appendTo(t.$ulClone);t.blocksClone=t.$ulClone.children();}}else{items.appendTo(t.$ul);t.blocks=t.$ul.children();children=t.blocks;}if(t.options.caption){t._captionDestroy();t._captionInit();}defaultFilter=t.defaultFilter;t.blocksAvailable=children.filter(defaultFilter);children.not('.cbp-item-hidden').not(defaultFilter).addClass('cbp-item-hidden');if(t.options.gridAdjustment==='responsive'){t._responsiveLayout();}t._layout();t._processStyle(t.transitionByFilter);t._resizeMainContainer('animate');var hiddenItem=items.filter('.cbp-item-hidden');switch(t.options.animationType){case'flipOut':hiddenItem.find('.cbp-item-wrapper').addClass('cbp-animation-flipOut-out');break;case'scaleSides':hiddenItem.find('.cbp-item-wrapper').addClass('cbp-animation-scaleSides-out');break;case'flipBottom':hiddenItem.find('.cbp-item-wrapper').addClass('cbp-animation-flipBottom-out');break;}fewItems.animate({opacity:1},800,function(){switch(t.options.animationType){case'bounceLeft':case'bounceTop':case'bounceBottom':t.blocks.css('opacity',1);t.blocksClone.css('opacity',1);break;case'flipOut':case'scaleSides':case'flipBottom':hiddenItem.css('opacity',1);break;}});if(t.elems){pluginObject.showCounter.call(this,t.elems);}setTimeout(function(){t._triggerEvent('appendItemsFinish');},900);}};$.fn.cubeportfolio=function(method){var args=arguments;return this.each(function(){if(pluginObject[method]){return pluginObject[method].apply(this,Array.prototype.slice.call(args,1));}else if(typeof method==='object'||!method){return pluginObject.init.apply(this,args);}else{throw new Error('Method '+method+' does not exist on jQuery.cubeportfolio.js');}});};$.fn.cubeportfolio.options={defaultFilter:'*',animationType:'fadeOut',gridAdjustment:'default',gapHorizontal:10,gapVertical:10,caption:'pushTop',displayType:'default',displayTypeSpeed:400,lightboxDelegate:'.cbp-lightbox',lightboxGallery:true,lightboxTitleSrc:'data-title',lightboxShowCounter:true,singlePageDelegate:'.cbp-singlePage',singlePageDeeplinking:true,singlePageStickyNavigation:true,singlePageShowCounter:true,singlePageCallback:function(url,element){},singlePageInlineDelegate:'.cbp-singlePageInline',singlePageInlinePosition:'top',singlePageInlineInFocus:true,singlePageInlineCallback:function(url,element){}};})(jQuery,window,document);